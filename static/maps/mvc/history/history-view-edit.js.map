{"version":3,"file":"history-view-edit.js","sources":["../../../src/mvc/history/history-view-edit.js"],"names":["define","HISTORY_VIEW","HISTORY_CONTENTS","STATES","HDA_MODEL","HDA_LI_EDIT","HDCA_LI_EDIT","TAGS","ANNOTATIONS","LIST_COLLECTION_CREATOR","PAIR_COLLECTION_CREATOR","LIST_OF_PAIRS_COLLECTION_CREATOR","faIconButton","PopupMenu","_l","_super","HistoryView","HistoryViewEdit","extend","HDAViewClass","HDAListItemEdit","HDCAViewClass","HDCAListItemEdit","initialize","attributes","prototype","call","this","tagsEditor","annotationEditor","purgeAllowed","annotationEditorShown","tagsEditorShown","_setUpListeners","panel","on","ev","data","dataDropped","dropTargetOff","_renderCounts","_setUpCollectionListeners","collection","_handleHdaDeletionChange","_handleHdaVisibleChange","model","fetch","_setUpModelListeners","updateHistoryDiskSize","_buildNewRender","$newRender","Galaxy","user","id","get","_renderTags","_renderAnnotation","renderItems","$whereTo","views","toggleLink","_class","text","join","$el","deleted","where","hidden","visible","msgs","length","push","showDeleted","showHidden","find","html","$where","TagsEditor","el","onshowFirstTime","render","onshow","toggleHDATagEditors","fxSpeed","onhide","$activator","title","classes","faIcon","appendTo","AnnotationEditor","toggleHDAAnnotationEditors","_setUpBehaviors","isAnonymous","nameSelector","attr","tooltip","placement","make_text_editable","on_finish","newName","previousName","save","name","fail","previous","multiselectActions","actions","func","action","HistoryDatasetAssociation","hide","getSelectedModels","ajaxQueue","unhide","undelete","confirm","purge","concat","_collectionActions","createListCollection","done","refresh","createPairCollection","createListOfPairsCollection","_attachItems","$list","append","reverse","map","view","_attachView","unshift","prepend","trigger","slideDown","_getItemViewOptions","options","_","itemModel","removeItemView","args","Array","slice","arguments","each","toggle","apply","events","clone","click .show-selectors-btn","click .toggle-deleted-link","toggleShowDeleted","click .toggle-hidden-link","toggleShowHidden","dropTargetOn","dropTarget","dropHandlers","dragenter","bind","dragover","dragleave","drop","$dropTarget","_renderDropTarget","before","_renderDropTargetHelp","evName","hasOwnProperty","$","remove","addClass","css","height","margin","border","border-radius","color","font-size","font-style","_dropHandlers","off","dropTargetToggle","preventDefault","stopPropagation","dataTransfer","originalEvent","dropEffect","getData","JSON","parse","err","warn","isObject","model_class","contents","copy","jQuery","when","toString"],"mappings":"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"}