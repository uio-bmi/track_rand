{"version":3,"file":"history-structure-view.js","sources":["../../../src/mvc/history/history-structure-view.js"],"names":["define","JobDAG","JOB","JOB_LI","HISTORY_CONTENT","DATASET_LI","BASE_MVC","logNamespace","window","HistoryStructureComponent","Backbone","View","extend","LoggableMixin","_logNamespace","className","_INITIAL_ZOOM_LEVEL","_MIN_ZOOM_LEVEL","_LINK_ID_SEP","_VERTEX_NAME_DATA_KEY","JobItemClass","JobListItemView","ContentItemClass","DatasetListItemView","initialize","attributes","this","log","component","_liMap","_createVertexItems","zoomLevel","layout","_createLayout","layoutOptions","view","eachVertex","vertex","li","type","data","job","_createJobListItem","_createContentListItem","name","debug","jobData","Job","outputModels","_","map","get","output","src","typeId","typeIdStr","id","model","contents","outputCollection","reset","historyId","tool","on","renderGraph","foldout","content","history_content_type","layoutDefaults","linkSpacing","linkWidth","linkHeight","jobWidth","jobHeight","jobSpacing","linkAdjX","linkAdjY","options","defaults","clone","vertices","values","nodeMap","links","svg","width","height","forEach","v","node","x","y","edges","e","link","source","target","push","render","$el","html","join","$graph","appendTo","$","_render","_updateLayout","css","renderSVG","position","top","left","is","delay","size","each","Math","max","x1","y1","x2","y2","JSON","stringify","highlightConnect","d","d3","select","classed","addClass","unhighlightConnect","removeClass","empty","append","attr","connections","selectAll","enter","_connectionPath","CURVE_X","controlY","events","mouseover .graph > .list-item","ev","highlightConnected","currentTarget","mouseout  .graph > .list-item","jobElement","highlight","undefined","jobClassFn","jQuery","prototype","connectionClass","$hoverTarget","call","edge","ancestorId","ancestorLi","eachEdge","descendantId","descendantLi","zoom","level","min","toString","VerticalHistoryStructureComponent","nodeId","CURVE_Y","controlX","HistoryStructureView","_layoutToComponentClass","horizontal","vertical","_DEFAULT_LAYOUT","contains","keys","_processTools","tools","_processJobs","jobs","_createDAG","dag","historyContents","toJSON","excludeSetMetadata","excludeErroredJobs","_createComponents","structure","componentViews","weakComponentGraphArray","componentGraph","_createComponent","ComponentClass","$components","changeLayout","Error"],"mappings":"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"}