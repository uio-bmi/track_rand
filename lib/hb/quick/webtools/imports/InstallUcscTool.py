from quick.webtools.GeneralGuiTool import GeneralGuiTool
from quick.origdata.UcscHandler import UcscHandler
from gold.util.CommonFunctions import createOrigPath
from quick.util.CommonFunctions import ensurePathExists
from quick.application.GalaxyInterface import GalaxyInterface
from gold.description.TrackInfo import TrackInfo

import os
import glob
import time
#This is a template prototyping GUI that comes together with a corresponding web page.
#

class InstallUcscTool(GeneralGuiTool):
    trackNames = None
    cellTypes = {'sh-sy5y': 'neuroblastoma clonal subline of the neuroepithelioma cell line sk-n-sh from the 1970 bone marrow biopsy of a 4-year-old girl with metastatic neuroblastoma, trisomy of 1q', 'htr8svn': 'trophoblast (htr-8/svneo) cell line, a thin layer of ectoderm that forms the wall of many mammalian blastulas and functions in the nutrition and implantation of the embryo', 'hmsc-uc_0081101.7': "undifferentiated mesenchymal stem cells from matrix (wharton's jelly)", 'huh7.5': 'hepatocellular carcinoma, hepatocytes selected for high levels of hepatitis c replication', 'hrcepic': 'renal cortical epithelial cells', 'bc_bladder_0111002': 'urinary bladder, donor 01-11002, age 83, caucasian, dna extract', 'hconf': 'conjunctival fibroblast', 'ecc1': 'epithelial cell line derived from an endometrium adenocarcinoma, fetal membranes were collected from women who underwent planned cesarean delivery at term, before labor and without rupture of membranes', 'hmsc-at': 'undifferentiated mesenchymal stem cells from two individuals, hmsc-at_9061601.12 and hmsc-at_0102604.12 from subcutaneous abdomen adipose tissue', 'hmscuc_0081101.7': "undifferentiated mesenchymal stem cells from matrix (wharton's jelly)", 'hepg2': 'hepatocellular carcinoma', 'ishikawa': 'endometrial adenocarcinoma', 'hepatocytes': 'primary hepatocytes, liver perfused by enzymes to generate single cell suspension', 'skeletal_muscle_bc': 'skeletal muscle, parental cell type to donors 01-11002 and h12817n', 'tbec': 'trachea and bronchial epithelial cells, passage 2 primary, non-immortalized cells, donor was 21 years old', 'cmk': 'acute megakaryocytic leukemia cells, "established from the peripheral blood of a 10-month-old boy with down\'s syndrome and acute megakaryocytic leukemia (aml m7) at relapse in 1985" - dsmz. (pmid: 3016165)', 't-47d': 'epithelial cell line derived from a mammary ductal carcinoma.', 'bc_kidney_h12817n': 'kidney, donor h12817n, age 71, caucasian, dna and rna extract', 'bc_skeletal_muscle_0111002': 'skeletal muscle, donor 01-11002, age 83, caucasian, dna and rna extract',\
     'huh-7.5': 'hepatocellular carcinoma, hepatocytes selected for high levels of hepatitis c replication', 'hsmmtube_fshd': 'myotube from facioscapulohumeral muscular dystrophy (fshd) patient, muscle needle biopsies', 'hela-s3': 'cervical carcinoma', 'cd34+_mobilized': 'hematopoietic progenitor cells- mobilized, from donor ro01679.', 'hbvp': 'brain vascular pericytes', 'nhem.f_m2_5071302.2': 'epidermal melanocytes (foreskin)', 'decidua': 'decidua cells (part of the mucous membrane lining uterus), fetal membranes were collected from women who underwent planned cesarean delivery at term, before labor and without rupture of membranes', 'bg02esebd': 'embryonic stem cell (hesc), bg02, embryoid body-derived', 'bc_breast_02-03015': 'breast, donor 02-03015, age 21, caucasian, dna extract', 'bc_esophagus_0111002': 'esophagus, donor 01-11002, age 83, caucasian, dna and rna extract', 'nhem.f_m2_6022001': 'epidermal melanocytes (foreskin)', 'bc_kidney_01-11002': 'kidney, donor 01-11002, age 83, caucasian, dna and rna extract', 'sk-n-sh': 'neuroblastoma, newly promoted to tier 2: not in 2011 analysis, the sk-n-sh line was established from a neuroblastoma in a 4 year old individual.', 'hmvec-lbl': 'blood microvascular endothelial cells, lung-derived', 'hsmmtube_emb': 'embryonic myotube', 'nb4': 'acute promyelocytic leukemia cell line. (pmid: 1995093)', 'hmnc-pb': 'mononuclear cells (peripheral blood-single donor) from two individuals, hmnc-pb_0022330.9 and hmnc-pb_0082430.9', 'panisletd': 'dedifferentiated human pancreatic islets from the national disease research interchange (ndri), same source as panislets', 'hasp': 'astrocytes spinal cord', 'ha-h': 'astrocytes-hippocampal', 'hmvecdblneo': 'neonatal blood microvascular endothelial cells, dermal-derived', 'hpiepc_9041503.2': 'placental epithelial cells amniotic membrane', 'aoaf': 'aortic adventitial fibroblast cells', 'hch_8100808.2': 'undifferentiated chondrocytes from knee joint', 'phte': 'primary tracheal epithelial cells', 'hmnccb_8072802.6': 'mononuclear cells, umbilical cord blood-single donor', 'bc_pericardium_h12529n': 'pericardium, donor h12529n, age 70, caucasian, dna extract', 'hmscbm': 'undifferentiated mesenchymal stem cells from two individuals, hmsc-bm_0050602.11 and hmsc-bm_0051105.11 from femoral head', 'melano': 'epidermal melanocytes', 'ips': 'induced pluripotent stem cell derived from skin fibroblast', 'mrt_a204': 'malignant rhabdoid tumor (mrt) line, rhabdomyosarcoma', 'nhdf_0060801.3': 'dermal fibroblasts from temple', 'hmncpb_0022330.9': 'mononuclear cells, peripheral blood-single donor', 'h9es-eb': 'embryonic stem cell (hesc) h9, embryoid bodies', 'prec': 'prostate epithelial cell line', 'hmvec-dly-neo': 'neonatal lymphatic microvascular endothelial cells, dermal-derived', 'hek293-t-rex': 'embryonic kidney cells transformed with adenovirus 5 dna stably expressing tetracycline repressor, hek293 (atcc number crl-1573) is the parental cell line, hypotriploid, xxx', 'nt2-d1': 'malignant pluripotent embryonal carcinoma (ntera-2), "the ntera-2 cl.d1 cell line is a pluripotent human testicular embryonal carcinoma cell line derived by cloning the ntera-2 cell line." - atcc. (pmid: 6694356)', 'hpc-pl_0101504.13': 'undifferentiated pericytes', 'gm12801': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah, treatment: epstein-barr virus transformed', 'mrt_ttc549': 'malignant hepatic rhabdoid tumor line', 'lymphoblastoid_cell_line': 'parental cell type to lymphoblastoid cell lines', 'hpdlf': 'periodontal ligament fibroblasts', 'hl60': 'promyelocytic leukemia cells, (pmid: 276884)', 'hsmm_fshd': 'primary myoblast from facioscapulohumeral muscular dystrophy (fshd) patients, muscle needle biopsies', 'hmvec-dneo': 'neonatal microvascular endothelial cells (single donor), dermal-derived', 'hmncpb_0082430.9': 'mononuclear cells, peripheral blood-single donor', 'u2os': 'osteosarcoma from the tibia of a 15 year old, j. ponten and e. saksela derived this line (originally 2t) in 1964 from a moderately differentiated sarcoma, viruses were not detected during co-cultivation with wi-38 cells or in cf tests against sv40, rsv or adenoviruses, mycoplasma contamination was detected and eliminated in 1972, (pmid: 6081590)',\
     'mrt_g401': 'malignant renal rhabdoid tumor line', 'h9ese': 'embryonic stem cell (hesc) h9, endoderm', 'hob': 'undifferentiated osteoblasts from two individuals, hob_0090202.1 and hob_0091301 from femoral head', 'bc_lung_01-11002': 'lung, donor 01-11002, age 83, caucasian, dna and rna extract', 'ovcar-3': 'ovarian adenocarcinoma, "the nih: ovcar-3 line was established in 1982 by t.c. hamilton, et al. from the malignant ascites of a patient with progressive adenocarcinoma of the ovary." - atcc. (pmid: 6604576)', 'pbde': 'peripheral blood-derived erythroblasts', 'bc_esophagus_01-11002': 'esophagus, donor 01-11002, age 83, caucasian, dna and rna extract', 'ips_nihi7': 'ips cells derived from ag08395 fibroblast', 'hmnccb_9111701.6': 'mononuclear cells, umbilical cord blood-single donor', 'hmsc-at_0102604.12': 'undifferentiated mesenchymal stem cells from subcutaneous abdomen adipose tissue', 'nhem_m2_7012303': 'epidermal melanocytes (adult) from temple', 'hpc-pl': 'undifferentiated pericytes from hpc-pl_0032601.13 and hpc-pl_0101504.13', 'bc_stomach_h12817n': 'stomach, donor h12817n, age 71, caucasian, dna and rna extract', 'myometr': 'myometrial cells', 'lhsr': 'prostate epithelial cells (prec), multiple human donors, all of whom are hiv-1, hepatitis b and hepatitis c negative, treatment: to create lhsr, cells were infected with amphotropic retroviruses encoding the sv40 large t antigen (l), the telomerase catalytic subunit htert (h), the sv40 small t antigen (s) and an oncogenic allele of h-ras (r).', 'prostate': 'prostate tissue purchased for cshl project', 'hl-60': 'promyelocytic leukemia cells, (pmid: 276884)', 'haoaf_6090101.11': 'aortic adventitial fibroblasts from tunica adventitia', 'bc_stomach_01-11002': 'stomach, donor 01-11002, age 83, caucasian, dna extract', 'hpcpl_0101504.13': 'undifferentiated pericytes', 'm059j': 'malignant glioblastoma, glioma, lack dna-dependent protein kinase activity, deficient in repair of dna double strand breaks, the cells are negative for glial fibrillary acidic protein (gfap), tumor specimen taken from a 33 year old', 'skmc_8121902.17': 'skeletal muscle cells from mm. intercostales', 'hfdpc': 'follicle dermal papilla cells from two individuals, hfdpc_0100503.2 and hfdpc_0102703.3 from lateral scalp (brown, blond)', 'hff': 'foreskin fibroblast', 'ht1080': 'epithelial cell line derived from a fibrosarcoma, (pmid: 4132053), pseudo-diploid male with a modal chromosome number of 46, numerous chromosome abnormalities', 'mcf10a-er-src': 'mammary gland, non-tumorigenic epithelial, inducible cell line, derived from the mcf-10a parental cells and contain er-src, a derivative of the src kinase oncoprotein (v-src) that is fused to the ligand-binding domain of the estrogen receptor (er)', 'ag10803': 'abdominal skin fibroblasts from apparently heathly 22 year old, "8% of the cells examined showing random chromosome loss, 2% showing random chromosome gain, and 2% showing 69,xyy" -coriell', 'hmnc-pb_0022330.9': 'mononuclear cells, peripheral blood-single donor', 'h9eseb': 'embryonic stem cell (hesc) h9, embryoid bodies', 'monocytescd14+': 'monocytes-cd14+ are cd14-positive cells from human leukapheresis production, from donor ro 01746 (draw 1 id is ro 01746, draw 2 id is ro 01826), newly promoted to tier 2: not in 2011 analysis', 'werirb1': 'retinoblastoma (pmid: 844036)', 'bc_jejunum_h12817n': 'jejunum, donor h12817n, age 71, caucasian, dna and rna extract', 'cll': 'chronic lymphocytic leukemia cell, t-cell lymphocyte', 'ips_nihi11': 'ips cells derived from ag20443 fibroblast', 'nhem_m2': 'epidermal melanocytes (adult) from two individuals, nhem_m2_7011001.2 and nhem_m2_7012303 from cheek / temple', 'gm18526': 'lymphoblastoid, international hapmap project, han chinese in beijing, china, treatment: epstein-barr virus transformed', 'bc_lung_h12817n': 'lung, donor h12817n, age 71, caucasian, dna and rna extract', 'wi-38': 'embryonic lung fibroblast cells, htert immortalized, includes raf1 construct', 'ag04450': 'fetal lung fibroblast', 'hpcpl_0032601.13': 'undifferentiated pericytes', 'hfdpc_0100503.2': 'follicle dermal papilla cells from lateral scalp (brown)', 'gm12812': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah, treatment: epstein-barr virus transformed', 'h9esebd': 'embryonic stem cell (hesc) h9, embryoid body-derived', 'bc_breast_0203015': 'breast, donor 02-03015, age 21, caucasian, dna extract', 'esophagus_bc': 'esophagus, parental cell type to donors 01-11002 and h12817n', 'nhbe_ra': 'bronchial epithelial cells with retinoic acid', 'be2_c': 'neuroblastoma, be-c is a clone of the sk-n-be neuroblastoma cell line (see atcc crl-2271) that was established in november of 1972 from a bone marrow biopsy taken from a 2-year-old individual with disseminated neuroblastoma after repeated courses of chemotherapy and radiotherapy.', 'nhbe': 'bronchial epithelial cells', 'ips_cwru1': 'ips cells derived from msc658 fibroblast', 'nhdf-ad': 'adult dermal fibroblasts', 'monocytes-cd14+_ro01826': 'monocytes-cd14+ are cd14-positive cells from human leukapheresis production, monocytes-cd14+_ro01826 is a second draw being used as a replicate for monocytes-cd14+_ro01746, newly promoted to tier 2: not in 2011 analysis', 'hek293': 'embryonic kidney, cells contain adenovirus 5 dna (pmid: 11967234)', 'bc_rectum_n29': 'rectum, donor n29, age 29, asian, dna extract', 'h9es': 'embryonic stem cell (hesc) h9', 't47d': 'epithelial cell line derived from a mammary ductal carcinoma.', 'ovcar3': 'ovarian adenocarcinoma, "the nih: ovcar-3 line was established in 1982 by t.c. hamilton, et al. from the malignant ascites of a patient with progressive adenocarcinoma of the ovary." - atcc. (pmid: 6604576)', 'pfsk-1': 'neuroectodermal cell line derived from a cerebral brain tumor, (pmid: 1316433)', 'bc_stomach_0111002': 'stomach, donor 01-11002, age 83, caucasian, dna extract', 'sknsh_ra': 'neuroblastoma cell line, treatment: differentiated with retinoic acid, (biedler, et al. morphology and growth, tumorigenicity, and cytogenetics of human neuroblastoma cells in continuous culture. cancer research 33, 2643-2652, november 1973.)', 'huh-7': 'hepatocellular carcinoma', 'hcf': 'cardiac fibroblasts', 'hch': 'undifferentiated chondrocytes from two individuals, hch_8100808.2 and hch_0011308.2p from knee joint', 'hcm': 'cardiac myocytes', 'hmvecdneo': 'neonatal microvascular endothelial cells (single donor), dermal-derived', 'rptec': 'renal proximal tubule epithelial cells', 'nh-a': 'astrocytes (also called astrocy)', 'gm12878-ximat': 'b-lymphocyte, lymphoblastoid, cloned for maternal x inactivation, international hapmap project, ceph/utah, epstein-barr virus', 'hmvec-dbl-neo': 'neonatal blood microvascular endothelial cells, dermal-derived', 'caco-2': 'colorectal adenocarcinoma. (pmid: 1939345)', 'bg02es': 'embryonic stem cell (hesc), bg02, treatment: h9 conditioned medium', 'gm10847': 'lymphoblastoid, international hapmap project, ceph/utah, treatment: epstein-barr virus transformed', 'stellate': 'hepatic stellate cells, liver that was perfused with collagenase and sellected for hepatic stellate cells by density gradient', 'huvec': 'umbilical vein endothelial cells', 'bc_left_ventricle_n41': 'left ventricle, donor n41, age 26, asian, dna extract', 'hmec': 'mammary epithelial cells', 'hmscat': 'undifferentiated mesenchymal stem cells from two individuals, hmsc-at_9061601.12 and hmsc-at_0102604.12 from subcutaneous abdomen adipose tissue', 'hsavec': 'saphenous vein endothelial cells from two individuals, hsavec_9100101.15 and hsavec_0022202.16 from thigh', 'hmsc-bm': 'undifferentiated mesenchymal stem cells from two individuals, hmsc-bm_0050602.11 and hmsc-bm_0051105.11 from femoral head', 'h7hesc': 'undifferentiated embryonic stem cells', 'nha': 'astrocytes (also called astrocy)', 'panc1': 'pancreatic carcinoma, (pmid: 1140870) panc-1 was established from a pancreatic carcinoma, which was extracted via pancreatico-duodenectomy specimen from a 56-year-old caucasian individual. malignancy of this cell line was verified via in vitro and in vivo assays.', 'hcpepic': 'choroid plexus epithelial cells', 'sk-n-mc': 'neuroepithelioma cell line derived from a metastatic supra-orbital human brain tumor, "sk-n-mc was isolated in september of l971 and was found to have moderate dopamine - beta - hydroxylase activity as well as formaldehyde induced fluorescence indicative of intracellular catecholamines." - atcc. (biedler, et al. morphology and growth, tumorigenicity, and cytogenetics of human neuroblastoma cells in continuous culture. cancer research 33, 2643-2652, november 1973.)', 'cd20+_ro01778': 'b cells, caucasian, draw number 1, newly promoted to tier 2: not in 2011 analysis', 'hmscat_9061601.12': 'undifferentiated mesenchymal stem cells from abdomen', 'bc_brain_h11058n': 'brain, donor h11058n, age 66, asian, dna extract', 'hek293trex': 'embryonic kidney cells transformed with adenovirus 5 dna stably expressing tetracycline repressor, hek293 (atcc number crl-1573) is the parental cell line, hypotriploid, xxx', 'bc_penis_h12817n': 'penis, donor h12817n, age 71, caucasian, dna extract', 'ht-1080': 'epithelial cell line derived from a fibrosarcoma, (pmid: 4132053), pseudo-diploid male with a modal chromosome number of 46, numerous chromosome abnormalities', 'medullo_d341': 'medulloblastoma cell line of neuron or neuron precurosr origin', 'hmvec-dad': 'adult dermal microvascular endothelial cells.', 'hct-116': 'colorectal carcinoma (pmid: 7214343)', 'bc_prostate_gland_h12817n': 'prostate gland, donor h12817n, age 71, caucasian, dna extract', 'ag09309': 'adult toe fibroblast from apparently healthy 21 year old, "7% of the cells examined showing random chromosome loss/gain" -coriell', 'hmvec-dly-ad': 'adult lymphatic microvascular endothelial cells, dermal-derived', 'hwp_8120201.5': 'undifferentiated white preadipocytes from upper arm', 'gm12866': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed.', 'hmnc-cb_8072802.6': 'mononuclear cells, umbilical cord blood-single donor', 'h9esafp': 'embryonic stem cell (hesc), h9-derived, treatment: h9 afp-', 'hpiepc_9012801.2': 'placental epithelial cells amniotic membrane', 'hrpepic': 'retinal pigment epithelial cells', 'hff-myc': 'foreskin fibroblast cells expressing canine cmyc', 'hpaepic': 'pulmonary alveolar epithelial cells', 'hmsc-uc_0052501.7': "undifferentiated mesenchymal stem cells from matrix (wharton's jelly)", 'urothelia': 'primary ureter cell culture of urothelial cells derived from a 12 year-old girl and immortalized by transfection with a temperature-sensitive sv-40 large t antigen gene', 'huh7': 'hepatocellular carcinoma', 'uch-1': 'chordoma cell line', 'h1-neurons': 'neurons derived from h1 embryonic stem cells, newly promoted to tier 2: not in 2011 analysis', 'mcf10aersrc': 'mammary gland, non-tumorigenic epithelial, inducible cell line, derived from the mcf-10a parental cells and contain er-src, a derivative of the src kinase oncoprotein (v-src) that is fused to the ligand-binding domain of the estrogen receptor (er)', 'hmvecdlyneo': 'neonatal lymphatic microvascular endothelial cells, dermal-derived', 'hffmyc': 'foreskin fibroblast cells expressing canine cmyc', 'hgf': 'gingival fibroblasts', 'hmscbm_0050602.11': 'undifferentiated mesenchymal stem cells from femoral head', 'h9es-cm': 'embryonic stem cell (hesc) h9, treatment: h9 conditioned medium', 'h9escm': 'embryonic stem cell (hesc) h9, treatment: h9 conditioned medium', 'bc_kidney_0111002': 'kidney, donor 01-11002, age 83, caucasian, dna and rna extract', 'cord_cd4_th1': 'cd4+ cells isolated from cord blood and enriched for th1 populations', 'cord_cd4_th0': 'cd4+ cells isolated from cord blood and enriched for th0 populations', 'hmncpb': 'mononuclear cells (peripheral blood-single donor) from two individuals, hmnc-pb_0022330.9 and hmnc-pb_0082430.9', 't98g': 'fibroblast cell line derived from a glioblastoma multiforme. (pmid: 222778)', 'hmvecdblad': 'adult blood microvascular endothelial cells, dermal-derived', 'hfl11w': 'fetal liver 11 weeks, consented fetal liver samples were isolated from legally aborted fetuses at 11 weeks gestation', 'monocytescd14+_ro01746': 'monocytes-cd14+ are cd14-positive cells from human leukapheresis production, from donor ro 01746 (draw 1 id is ro 01746, draw 2 id is ro 01826), monocytes-cd14+_ro01746 and monocytes-cd14+_ro01826 are being used as replicates, newly promoted to tier 2: not in 2011 analysis', 'bc_colon_0111002': 'colon, donor 01-11002, age 83, caucasian, dna and rna extract', 'jurkat': 't lymphoblastoid derived from an acute t cell leukemia, "the jurkat cell line was established from the peripheral blood of a 14 year old boy by schneider et al., and was originally designated jm." - atcc. (pmid: 68013)', 'hipepic': 'iris pigment epithelial cells', 'lhcn-m2': 'skeletal myoblasts derived from satellite cells from the pectoralis major muscle of a 41 year old caucasian heart transplant donor, immortalized with lox-hygro-htert ("lh"), and cdk4-neo ("cn"), zhu et al. (2007) in aging cell, vol. 6, pp 515-523, newly promoted to tier 2: not in 2011 analysis.', 'raji': 'b lymphocyte, "the raji line of lymphoblast-like cells was established by r.j.v. pulvertaft in 1963 from a burkitt\'s lymphoma of the left maxilla of an 11-year-old black male." - atcc. (pmid: 14086209)', 'hmepc_6022801.3': 'mammary epithelial cells', 'imr90': 'fetal lung fibroblasts, newly promoted to tier 2: not in 2011 analysis', 'hpiepc': 'placental epithelial cells amniotic membrane', 'sk-n-sh_ra': 'neuroblastoma cell line, treatment: differentiated with retinoic acid, (biedler, et al. morphology and growth, tumorigenicity, and cytogenetics of human neuroblastoma cells in continuous culture. cancer research 33, 2643-2652, november 1973.)', 'hmepc': 'mammary epithelial cells (placeholder, waiting on second lot/donor from promocell)', 'cord_cd4_naive': 'cd4+ cells isolated from cord blood and enriched for naive populations', 'mel_2183': 'melanoma cell line', 'bc_bladder_01-11002': 'urinary bladder, donor 01-11002, age 83, caucasian, dna extract', 'h9es-afp-': 'embryonic stem cell (hesc), h9-derived, treatment: h9 afp-', 'h9es-afp+': 'embryonic stem cell (hesc), h9-derived, treatment: h9 afp+', 'haepic': 'amniotic epithelial cells', 'medullo': 'medulloblastoma (aka d721), surgical resection from a patient with medulloblastoma as described by darrell bigner (1997)', 'hre': 'renal epithelial cells', 'bc_skin_01-11002': 'skin, donor 01-11002, age 83, caucasian, dna extract', 'lhcnm2': 'skeletal myoblasts derived from satellite cells from the pectoralis major muscle of a 41 year old caucasian heart transplant donor, immortalized with lox-hygro-htert ("lh"), and cdk4-neo ("cn"), zhu et al. (2007) in aging cell, vol. 6, pp 515-523, newly promoted to tier 2: not in 2011 analysis.', 'gm19238': 'b-lymphocyte, lymphoblastoid, international hapmap project, yoruba in ibadan, nigera, treatment: epstein-barr virus transformed', 'gm19239': 'b-lymphocyte, lymphoblastoid, international hapmap project, yoruba in ibadan, nigera, treatment: epstein-barr virus transformed', 'hmvec-lly': 'lymphatic microvascular endothelial cells, lung-derived', 'hmscbm_0051105.11': 'undifferentiated mesenchymal stem cells from femoral head', 'hmnc-cb_9111701.6': 'mononuclear cells, umbilical cord blood-single donor', 'bc_testis_n30': 'testis, donor n30, age 41, asian, dna extract', 'hch_0011308.2p': 'undifferentiated chondrocytes from knee joint', 'progfib': 'fibroblasts, hutchinson-gilford progeria syndrome (cell line hgps, hgadfn167, progeria research foundation)', 'hmveclly': 'lymphatic microvascular endothelial cells, lung-derived', 'fibrop': "fibroblasts taken from individuals with parkinson's disease, ag20443, ag08395 and ag08396 were pooled for this sample", 'gm12878ximat': 'b-lymphocyte, lymphoblastoid, cloned for maternal x inactivation, international hapmap project, ceph/utah, epstein-barr virus', 'shsy5y': 'neuroblastoma clonal subline of the neuroepithelioma cell line sk-n-sh from the 1970 bone marrow biopsy of a 4-year-old girl with metastatic neuroblastoma, trisomy of 1q', 'gm06990': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah, treatment: epstein-barr virus transformed', 'nhem.f_m2': 'epidermal melanocytes from two individuals, nhem.f_m2_5071302.2 and nhem.f_m2_6022001 from foreskin', 'hpc-pl_0032601.13': 'undifferentiated pericytes', 'nhem_m2_7011001.2': 'epidermal melanocytes (adult) from cheek', 'gm19240': 'b-lymphocyte, lymphoblastoid, international hapmap project, yoruba in ibadan, nigera, treatment: epstein-barr virus transformed', 'rwpe1': 'prostate epithelial', 'panislets': 'pancreatic islets from 2 donors, the sources of these primary cells are cadavers from national disease research interchange (ndri) and another sample isolated as in bucher, p. et al., assessment of a novel two-component enzyme preparation for human islet isolation and transplantation. transplantation 79, 917 (2005)', 'hsavec_0022202.16': 'saphenous vein endothelial cells from thigh', 'hsmm_emb': 'embryonic myoblast', 'hpcpl': 'undifferentiated pericytes from hpc-pl_0032601.13 and hpc-pl_0101504.13', 'bc_adrenal_gland_h12803n': 'adrenal gland, donor h12803n, age 88, caucasian, dna extract', 'hmscat_0102604.12': 'undifferentiated mesenchymal stem cells from subcutaneous abdomen adipose tissue', 'hfdpc_0102703.3': 'follicle dermal papilla cells from lateral scalp (blond)', 'haoec_7071706.1': 'aortic endothelial cells', 'nt2d1': 'malignant pluripotent embryonal carcinoma (ntera-2), "the ntera-2 cl.d1 cell line is a pluripotent human testicular embryonal carcinoma cell line derived by cloning the ntera-2 cell line." - atcc. (pmid: 6694356)', 'ag04449': 'fetal buttock/thigh fibroblast', 'h7-hesc': 'undifferentiated embryonic stem cells', 'hpaec': 'pulmonary artery endothelial cells.', 'hhsec': 'hepatic sinusoidal endothelial cells', 't_cells_cd4+': 'parent cell line for t cells cd4+.', 'bc_uterus_bn0765': 'uterus, donor bn0765, age 44, asian, dna extract', 'hwp_0092205': 'undifferentiated white preadipocytes from abdomen', 'hsavec_9100101.15': 'saphenous vein endothelial cells from thigh', 'gm12878': 'b-lymphocyte, lymphoblastoid, international hapmap project - ceph/utah - european caucasion, epstein-barr virus', 'ha-sp': 'astrocytes spinal cord', 'gm12875': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed', 'gm12874': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed', 'gm12871': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed.', 'gm12870': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed.', 'gm12873': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed', 'gm12872': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed', 'u87': 'glioblastoma, astrocytoma, (pmid: 4332744)', 'hac': 'astrocytes-cerebellar', 'hmscuc': "undifferentiated mesenchymal stem cells from two individuals, hmsc-uc_0081101.7 and hmsc-uc_0052501.7 from matrix (wharton's jelly)", 'gm12892': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1463, treatment: epstein-barr virus transformed', 'gm12891': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1463, treatment: epstein-barr virus transformed', 'aosmc': 'aortic smooth muscle cells', 'kidney_bc': 'kidney, parental cell type to donors 01-11002 and h12817n', 'h9es-ebd': 'embryonic stem cell (hesc) h9, embryoid body-derived', 'monocytescd14+_ro01826': 'monocytes-cd14+ are cd14-positive cells from human leukapheresis production, monocytes-cd14+_ro01826 is a second draw being used as a replicate for monocytes-cd14+_ro01746, newly promoted to tier 2: not in 2011 analysis', 'bc_small_intestine_01-11002': 'small intestine, donor 01-11002, age 83, caucasian, dna and rna extract', 'pfsk1': 'neuroectodermal cell line derived from a cerebral brain tumor, (pmid: 1316433)', 'haoec': 'aortic endothelial cells (thoracic) from two individuals, haoec_7071706.1 and haoec_8061102.1', 'cd20+_ro01794': 'b cells, african american, draw number 1, newly promoted to tier 2: not in 2011 analysis', 'stomach_bc': 'stomach, parental cell type to donors 01-11002 and h12817n', 'gm04504': 'adult twin pair fibroblasts, monozygotic twin of gm04503, 13% of the cells examined show random chromosome loss', 'hrgec': 'renal glomerular endothelial cells', 'gm04503': 'adult twin pair fibroblasts, monozygotic twin of gm04504', 'gm18505': 'lymphoblastoid, international hapmap project, yoruba in ibadan, nigera, treatment: epstein-barr virus transformed', 'hvmf_6091203.3': 'villous mesenchymal fibroblasts from villous tissue', 'hmf': 'mammary fibroblasts', 'bc_adipose_uhn00001': 'adipose tissue, donor uhn0001, age 35, african american, dna extract', 'bc_lung_0111002': 'lung, donor 01-11002, age 83, caucasian, dna and rna extract', 'hbvsmc': 'brain vascular smooth muscle cells.', 'lung_bc': 'lung, parental cell type to donors 01-11002 and h12817n', 'bc_placenta_uhn00189': 'placenta, donor uhn00189, age 29', 'h1hesc': 'embryonic stem cells', 'hmscuc_0052501.7': "undifferentiated mesenchymal stem cells from matrix (wharton's jelly)", 'osteobl': 'osteoblasts (nhost)', 'hob_0091301': 'undifferentiated osteoblasts from femoral head', 'fibrop_ag08395': "fibroblasts taken from individuals with parkinson's disease", 'fibrop_ag08396': "fibroblasts taken from individuals with parkinson's disease", 'ag09319': 'gum tissue fibroblasts from apparently heathly 24 year old', 'th2': 'primary th2 t cells', 'th1': 'primary th1 t cells', 'adult_cd4_naive': 'cd4+ cells isolated from human blood and enriched for naive populations', 'helas3': 'cervical carcinoma', 'cd20+': 'b cells from donors ro01778 and ro01794, newly promoted to tier 2: not in 2011 analysis', 'hpde6e6e7': 'pancreatic duct cells immortalized with e6e7 gene of hpv', 'haoec_8061102.1': 'aortic endothelial cells from throracic', 'nhdf-neo': 'neonatal dermal fibroblasts', 'nhdf': 'dermal fibroblasts from temple / breast', 'monocytes-cd14+_ro01746': 'monocytes-cd14+ are cd14-positive cells from human leukapheresis production, from donor ro 01746 (draw 1 id is ro 01746, draw 2 id is ro 01826), monocytes-cd14+_ro01746 and monocytes-cd14+_ro01826 are being used as replicates, newly promoted to tier 2: not in 2011 analysis', 'sknmc': 'neuroepithelioma cell line derived from a metastatic supra-orbital human brain tumor, "sk-n-mc was isolated in september of l971 and was found to have moderate dopamine - beta - hydroxylase activity as well as formaldehyde induced fluorescence indicative of intracellular catecholamines." - atcc. (biedler, et al. morphology and growth, tumorigenicity, and cytogenetics of human neuroblastoma cells in continuous culture. cancer research 33, 2643-2652, november 1973.)', 'bc_esophagus_h12817n': 'esophagus, donor h12817n, age 71, caucasian, dna extract', 'gm19193': 'lymphoblastoid, international hapmap project, yoruba in ibadan, nigera, treatment: epstein-barr virus transformed', 'hmsc-uc': "undifferentiated mesenchymal stem cells from two individuals, hmsc-uc_0081101.7 and hmsc-uc_0052501.7 from matrix (wharton's jelly)", 'gm19099': 'lymphoblastoid, international hapmap project, yoruba in ibadan, nigera, treatment: epstein-barr virus transformed', 'hmsc-bm_0051105.11': 'undifferentiated mesenchymal stem cells from femoral head', 'haoaf': 'aortic adventitial fibroblasts from two individuals, haoaf_6090101.11 and haoaf_6111301.9 from tunica adventitia', 'bc_skeletal_muscle_h12817n': 'skeletal muscle, donor h12817n, age 71, caucasian, dna and rna extract', 'mda-mb-231': 'breast adenocarcinoma, epithelial cell line, derived from metastatic site: pleural effusion. (pmid: 730202)', 'hmnccb': 'mononuclear cells (umbilical cord blood-single donor) from two individuals, hmnc-cb_9111701.6 and hmnc-cb_8072802.6', 'hah': 'astrocytes-hippocampal', 'h1-hesc': 'embryonic stem cells', 'hal': 'adult liver, genomic dna purified from surgically excised adult human liver', 'bc_spleen_h12817n': 'spleen, donor h12817n, age 71, caucasian, dna and rna extract', 'bc_colon_01-11002': 'colon, donor 01-11002, age 83, caucasian, dna and rna extract', 'mcf-7': 'mammary gland, adenocarcinoma. (pmid: 4357757), newly promoted to tier 2: not in 2011 analysis', 'skmc_9011302': 'skeletal muscle cells from m. pectoralis', 'rpmi7951': 'human skin malignant melanoma cells, this is a hyperdiploid human cell line with the modal chromosome number of 49, occurring in 24% of cells. polyploid cells occurred at 22%, which is high.', 'bc_liver_0111002': 'liver, donor 01-11002, age 83, caucasian, dna and rna extract', 'hfl24w': 'fetal liver 24 weeks, consented fetal liver samples were isolated from legally aborted fetuses at 24 weeks gestation', 'hbmec': 'brain microvascular endothelial cells', 'fibrop_ag20443': "fibroblasts taken from individuals with parkinson's disease", 'hmvec-dbl-ad': 'adult blood microvascular endothelial cells, dermal-derived', 'bc_skin_0111002': 'skin, donor 01-11002, age 83, caucasian, dna extract', 'pbmc': 'peripheral blood mononuclear cells', 'colon_bc': 'colon, parent cell type to donors bc_01-11002 and bc_h12817n', 'pbdefetal': 'peripheral blood-derived erythroblasts from 16-19 week human fetal liver', 'gm08714': 'lymphoblastoid cell line, instability of heterochromatin of chromosomes 1, 9, and 16 with variable combined immunodeficiency; dysmorphic facial features, developmental delay, malabsorption, and recurrent infections; see gm08747 fibroblast; donor subject is a compound heterozygote: one allele has a g&gt;a transition at nucleotide 1807 (1807g&gt;a) of the dnmt3b gene resulting in an ala to thr substitution at codon 603 [ala603thr (a603t)], the mutation occurring in a region between motifs i and iv within the catalytic domain of dnmt3b; the second allele has a g&gt;a transition within intron 22 located 11 nucleotides 5-prime of the normal splice acceptor site [ivs22as,g&gt;a,-11] resulting in the generation of a novel splice acceptor site and a 9-bp insertion in the processed rna. this results in the insertion of 3 amino acids (serine, threonine, and proline) at codon 744 (744ins3). the insertion was within the conserved region of the catalytic domain, which is likely to be disrupted by the insertion of a proline residue. this mutation was de novo.', 'uch1': 'chordoma cell line', 'mcf7': 'mammary gland, adenocarcinoma. (pmid: 4357757), newly promoted to tier 2: not in 2011 analysis', 'h9esafp+': 'embryonic stem cell (hesc), h9-derived, treatment: h9 afp+', 'hpde6-e6e7': 'pancreatic duct cells immortalized with e6e7 gene of hpv', 'monocytes-cd14+': 'monocytes-cd14+ are cd14-positive cells from human leukapheresis production, from donor ro 01746 (draw 1 id is ro 01746, draw 2 id is ro 01826), newly promoted to tier 2: not in 2011 analysis', 'hmnc-cb': 'mononuclear cells (umbilical cord blood-single donor) from two individuals, hmnc-cb_9111701.6 and hmnc-cb_8072802.6', 'gm15510': 'lymphoblastoid nigms human genetic cell repository, dna polymorphism discovery resource collection, treatment: epstein-barr virus transformed', 'colo829': 'malignant melanoma', 'ecc-1': 'epithelial cell line derived from an endometrium adenocarcinoma, fetal membranes were collected from women who underwent planned cesarean delivery at term, before labor and without rupture of membranes', 'bc_skeletal_muscle_01-11002': 'skeletal muscle, donor 01-11002, age 83, caucasian, dna and rna extract', 'bc_small_intestine_0111002': 'small intestine, donor 01-11002, age 83, caucasian, dna and rna extract', 'bc_pancreas_h12817n': 'pancreas, donor h12817n, age 71, caucasian, dna and rna extract', 'hvmf': 'villous mesenchymal fibroblast cells', 'a549': 'epithelial cell line derived from a lung carcinoma tissue. (pmid: 175022), "this line was initiated in 1972 by d.j. giard, et al. through explant culture of lung carcinomatous tissue from a 58-year-old caucasian male." - atcc, newly promoted to tier 2: not in 2011 analysis', 'loucy': 't cell leukemia', 'k562': 'leukemia, "the continuous cell line k-562 was established by lozzio and lozzio from the pleural effusion of a 53-year-old female with chronic myelogenous leukemia in terminal blast crises." - atcc', 'mdamb231': 'breast adenocarcinoma, epithelial cell line, derived from metastatic site: pleural effusion. (pmid: 730202)', 'bj': 'skin fibroblast, "the line was established from skin taken from normal foreskin." - atcc.  (pmid: 9916803)', 'bc_colon_h12817n': 'colon, donor h12817n, age 71, caucasian, dna and rna extract', 'bc_leukocyte_uhn00204': 'peripheral blood mononuclear cell, donor uhn00204, age 54, caucasian, dna extract', 'h9es-e': 'embryonic stem cell (hesc) h9, endoderm', '8988t': 'pancreas adenocarcinoma (pa-tu-8988t), "established in 1985 from the liver metastasis of a primary pancreatic adenocarcinoma from a 64-year-old woman" - dsmz', 'nhdfneo': 'neonatal dermal fibroblasts', 'hpaf': 'pulmonary artery fibroblasts', 'gm12813': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah, treatment: epstein-barr virus transformed', 'hsmm': 'skeletal muscle myoblasts', 'hvmf_6100401.3': 'villous mesenchymal fibroblasts from villous tissue', 'skmc': 'skeletal muscle cells', 'bg02es-ebd': 'embryonic stem cell (hesc), bg02, embryoid body-derived', 'hmnc-pb_0082430.9': 'mononuclear cells, peripheral blood-single donor', 'rpmi-7951': 'human skin malignant melanoma cells, this is a hyperdiploid human cell line with the modal chromosome number of 49, occurring in 24% of cells. polyploid cells occurred at 22%, which is high.', 'hmvecdad': 'adult dermal microvascular endothelial cells.', 'gm18951': 'lymphoblastoid, international hapmap project, japanese in tokyo, japan, treatment: epstein-barr virus transformed', 'gm12868': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed.', 'gm12869': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed.', 'heepic': 'esophageal epithelial cells', 'weri-rb-1': 'retinoblastoma (pmid: 844036)', 'sknsh': 'neuroblastoma, newly promoted to tier 2: not in 2011 analysis, the sk-n-sh line was established from a neuroblastoma in a 4 year old individual.', 'gm12867': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed.', 'gm12864': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed', 'gm12865': 'b-lymphocyte, lymphoblastoid, international hapmap project, ceph/utah pedigree 1459, treatment: epstein-barr virus transformed', 'chorion': 'chorion cells (outermost of two fetal membranes), fetal membranes were collected from women who underwent planned cesarean delivery at term, before labor and without rupture of membranes.', 'panc-1': 'pancreatic carcinoma, (pmid: 1140870) panc-1 was established from a pancreatic carcinoma, which was extracted via pancreatico-duodenectomy specimen from a 56-year-old caucasian individual. malignancy of this cell line was verified via in vitro and in vivo assays.', 'hmveclbl': 'blood microvascular endothelial cells, lung-derived', 'fibrobl': 'child fibroblast', 'adult_cd4_th0': 'cd4+ cells isolated from human blood and enriched for th0 populations', 'adult_cd4_th1': 'cd4+ cells isolated from human blood and enriched for th1 populations', 'bc_liver_01-11002': 'liver, donor 01-11002, age 83, caucasian, dna and rna extract', 'hmsc-bm_0050602.11': 'undifferentiated mesenchymal stem cells from femoral head', 'hmsc-at_9061601.12': 'undifferentiated mesenchymal stem cells from abdomen', 'hcfaa': 'cardiac fibroblasts- adult atrial', 'hnpcepic': 'non-pigment ciliary epithelial cells', 'gliobla': 'glioblastoma, these cells (aka h54 and d54) come from a surgical resection from a patient with glioblastoma multiforme (who grade iv). d54 is a commonly studied glioblastoma cell line (bao et al., 2006) that has been thoroughly described by s bigner (1981). (pmid: 7252524)', 'saec': 'small airway epithelial cells', 'nhdf_7071701.2': 'dermal fibroblasts from breast', 'lncap': 'prostate adenocarcinoma, "lncap clone fgc was isolated in 1977 by j.s. horoszewicz, et al., from a needle aspiration biopsy of the left supraclavicular lymph node of a 50-year-old caucasian male (blood type b+) with confirmed diagnosis of metastatic prostate carcinoma." - atcc. (horoszewicz et al. lncap model of human prostatic carcinoma. cancer research 43, 1809-1818, april 1983.)', 'hob_0090202.1': 'undifferentiated osteoblasts from femoral head', 'hmvecdlyad': 'adult lymphatic microvascular endothelial cells, dermal-derived', 'hek293t': 'embryonic kidney that expresses sv40 large t antigen, hek293 (atcc number crl-1573) is the parental cell line', 'nhek': 'epidermal keratinocytes', 'caco2': 'colorectal adenocarcinoma. (pmid: 1939345)', 'hct116': 'colorectal carcinoma (pmid: 7214343)', 'hsmmtube': 'skeletal muscle myotubes differentiated from the hsmm cell line', 'hpf': 'pulmonary fibroblasts isolated from lung tissue', 'dnd41': 't cell leukemia with notch mutation', 'gm18507': 'lymphoblastoid, international hapmap project, yoruba in ibadan, nigera, treatment: epstein-barr virus transformed', 'h1neurons': 'neurons derived from h1 embryonic stem cells, newly promoted to tier 2: not in 2011 analysis', 'hwp': 'undifferentiated white preadipocytes from two individuals, hwp_0092205 and hwp_8120201.5, subcutaneous adipose tissue from abdomen / upper arm', 'nhdfad': 'adult dermal fibroblasts', 'haoaf_6111301.9': 'aortic adventitial fibroblasts from tunica adventitia', 'wi38': 'embryonic lung fibroblast cells, htert immortalized, includes raf1 construct', 'nhlf': 'lung fibroblasts'}
    
    
    @staticmethod
    def getToolName():
        return "Install UCSC track"

    @staticmethod
    def getInputBoxNames():
        "Returns a list of names for input boxes, implicitly also the number of input boxes to display on page. Each such box will call function getOptionsBoxK, where K is in the range of 1 to the number of boxes"
        return ['Genome','Track', 'Trackname','Select CellType', 'Select CellType', 'Description for cell type']

    @staticmethod    
    def getOptionsBox1():
        "Returns a list of options to be displayed in the first options box"
        return '__genome__'
    
    @staticmethod    
    def getOptionsBox2(prevChoices): 
        '''Returns a list of options to be displayed in the second options box, which will be displayed after a selection is made in the first box.
        prevChoices is a list of selections made by the web-user in the previous input boxes (that is, list containing only one element for this case)        
        '''
        InstallUcscTool.trackNames = prevChoices[-1]
        return ('__track__','ucsc')
    @staticmethod 
    def getOptionsBox3(prevChoices): 
        
        return ''
    
    @staticmethod 
    def getOptionsBox4(prevChoices): 
        if prevChoices[1].find(':bed')>0:
            ucscFileName = prevChoices[1].split(':')[-2].lower()
            allCellTypes = InstallUcscTool.cellTypes.keys()
            cellTypes = [cellType for cellType in allCellTypes if ucscFileName.find(cellType)>-1]
            if len(cellType)>0:
                return cellTypes+['Wrong cell type']
    
    @staticmethod 
    def getOptionsBox5(prevChoices): 
        if prevChoices[-2]=='Wrong cell type':
            return sorted(InstallUcscTool.cellTypes.keys())
        
    
    @staticmethod 
    def getOptionsBox6(prevChoices): 
        if prevChoices[-2] not in ['', None]:
            return InstallUcscTool.cellTypes[prevChoices[-2]], 2, True
        elif prevChoices[-3] not in ['', None]:
            return InstallUcscTool.cellTypes[prevChoices[-3]], 2, True
    
    #@staticmethod    
    #def getOptionsBox3(prevChoices):
    #    return ['']

    #@staticmethod    
    #def getOptionsBox4(prevChoices):
    #    return ['']

    #@staticmethod
    #def getDemoSelections():
    #    return ['testChoice1','..']
        
    @staticmethod    
    def execute(choices, galaxyFn=None, username=''):
        '''Is called when execute-button is pushed by web-user.
        Should print output as HTML to standard out, which will be directed to a results page in Galaxy history. If getOutputFormat is anything else than HTML, the output should be written to the file with path galaxyFn.gtr
        If needed, StaticFile can be used to get a path where additional files can be put (e.g. generated image files).
        choices is a list of selections made by web-user in each options box.
        '''
        print 'Executing...'
        print choices
        print choices[-1]
        genome = choices[0]
        trackNames = choices[1].split(':')
        ucscFileName = trackNames[-2]
        for cellType in InstallUcscTool.cellTypes:
            if ucscFileName.find(cellType)>-1:
                print 'CellType and fileName: ', cellType,  ucscFileName
                break
        internalTrackPath = choices[2].split(':')
        bedfil, suffix = None, None
        metaData = None
        if trackNames[0] == 'ucsc':
            ucscObj = UcscHandler()
            print InstallUcscTool.trackNames
            if len(trackNames) == 3:
                lastLevelForTrackList = ucscObj.getFinalLevelTrackNames(genome, trackNames)
            else:
                lastLevelForTrackList = [trackNames[-2]]
                trackNames = trackNames[:-2]
                
            for i in lastLevelForTrackList:
                bedfil, metaData = ucscObj.getBedData(genome, trackNames+[i, 'bed'])
                print 'downloaded %s' % i
                print bedfil[:35]
                time.sleep(0.5)
#                path = createOrigPath(genome, internalTrackPath+[i])
                path = createOrigPath(genome, internalTrackPath)
                origFn = path + os.sep +internalTrackPath[-1]+'.bed'
                ensurePathExists(origFn)
                open(origFn, 'w').write(bedfil)
                os.chmod(origFn, 0664)
#                InstallUcscTool.storeTrackInfo(genome, internalTrackPath+[i], metaData)
                InstallUcscTool.storeTrackInfo(genome, internalTrackPath, metaData)
        else:
            
            path = createOrigPath(genome, trackNames)
            if os.path.isdir(path):
                
                filenames = os.listdir(path)
            else:
                fileName = os.listdir(path)[0]
                print fileName
                suffix = fileName.split('.')[-1]
                bedfil = open(path + os.sep + fileName, 'r').read()
            
        
            path = createOrigPath(genome, internalTrackPath)

        
            suffix = trackNames[-1] if not suffix else suffix
            origFn = path + os.sep + internalTrackPath[-1]+'.' + suffix
            ensurePathExists(origFn)
            open(origFn, 'w').write(bedfil)
            os.chmod(origFn, 0664)
            
        GalaxyInterface.startPreProcessing(genome, internalTrackPath, username)
        

    @staticmethod
    def validateAndReturnErrors(choices):
        '''
        Should validate the selected input parameters. If the parameters are not valid,
        an error text explaining the problem should be returned. The GUI then shows this text
        to the user (if not empty) and greys out the execute button (even if the text is empty).
        If all parameters are valid, the method should return None, which enables the execute button.
        '''
        trackNameStr = choices[2].strip()
        if len(trackNameStr)>0 and trackNameStr[-1]==':':
            return 'Colon is not allowed as last character in Trackname.'
        return None
    
    @staticmethod
    def storeTrackInfo(genome, trackName, metaData):
        trackInfoObject = TrackInfo(genome, trackName)           
        for i in metaData.keys():
            setattr(trackInfoObject, i, metaData[i])
        trackInfoObject.store()
        
    #@staticmethod
    #def isPublic():
    #    return False
    #
    #@staticmethod
    #def isRedirectTool():
    #    return False
    #
    #@staticmethod
    #def isHistoryTool():
    #    return True
    #
    #@staticmethod
    #def isDynamic():
    #    return True
    #
    #@staticmethod
    #def getResetBoxes():
    #    return []
    #
    #@staticmethod
    #def getToolDescription():
    #    return ''
    #
    #@staticmethod
    #def getToolIllustration():
    #    return None
    #
    #@staticmethod
    #def isDebugMode():
    #    return True
    #
    #@staticmethod    
    #def getOutputFormat():
    #    return 'html'
    #
